"use strict";(self.webpackChunkrafaelszp_github_io=self.webpackChunkrafaelszp_github_io||[]).push([[7411],{1932:(e,o,s)=>{s.r(o),s.d(o,{assets:()=>t,contentTitle:()=>n,default:()=>u,frontMatter:()=>i,metadata:()=>d,toc:()=>c});var r=s(4848),a=s(8453);const i={sidebar_label:"AWS CloudFront - Vis\xe3o Geral"},n="AWS CloudFront - Vis\xe3o geral",d={id:"aws/Networking/Articles/AWS Cloudfront - Vis\xe3o geral",title:"AWS CloudFront - Vis\xe3o geral",description:"Created05",source:"@site/docs/aws/Networking/Articles/AWS Cloudfront - Vis\xe3o geral.md",sourceDirName:"aws/Networking/Articles",slug:"/aws/Networking/Articles/AWS Cloudfront - Vis\xe3o geral",permalink:"/docs/aws/Networking/Articles/AWS Cloudfront - Vis\xe3o geral",draft:!1,unlisted:!1,editUrl:"https://github.com/rafaelszp/rafaelszp.github.io/tree/main/packages/create-docusaurus/templates/shared/docs/aws/Networking/Articles/AWS Cloudfront - Vis\xe3o geral.md",tags:[],version:"current",frontMatter:{sidebar_label:"AWS CloudFront - Vis\xe3o Geral"},sidebar:"principal",previous:{title:"Code Pipeline - Vis\xe3o geral",permalink:"/docs/aws/DevOps/articles/Code Pipeline - Vis\xe3o geral"},next:{title:"Estudo de caso 1 - NAT Gateway",permalink:"/docs/aws/Networking/Case Studies/natgateway"}},t={},c=[{value:"O que \xe9?",id:"o-que-\xe9",level:2},{value:"Componentes b\xe1sicos",id:"componentes-b\xe1sicos",level:2},{value:"Principais benef\xedcios",id:"principais-benef\xedcios",level:2},{value:"Tempo de resposta r\xe1pido",id:"tempo-de-resposta-r\xe1pido",level:3},{value:"Seguran\xe7a",id:"seguran\xe7a",level:3},{value:"Restri\xe7\xe3o de acesso ao origin",id:"restri\xe7\xe3o-de-acesso-ao-origin",level:4},{value:"Personaliza\xe7\xe3o de comportamento",id:"personaliza\xe7\xe3o-de-comportamento",level:3},{value:"Eventos que ativam fun\xe7\xf5es Lambda@Edge",id:"eventos-que-ativam-fun\xe7\xf5es-lambdaedge",level:4},{value:"Eventos que ativam fun\xe7\xf5es CloudFront",id:"eventos-que-ativam-fun\xe7\xf5es-cloudfront",level:4},{value:"Origin Shield",id:"origin-shield",level:4},{value:"Failover",id:"failover",level:4},{value:"Custo efetivo",id:"custo-efetivo",level:3},{value:"Cobran\xe7a",id:"cobran\xe7a",level:4},{value:"Monitoramento",id:"monitoramento",level:2},{value:"Outros pontos a destacar",id:"outros-pontos-a-destacar",level:2},{value:"References",id:"references",level:2}];function l(e){const o={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.h1,{id:"aws-cloudfront---vis\xe3o-geral",children:"AWS CloudFront - Vis\xe3o geral"}),"\n",(0,r.jsx)(o.p,{children:"Created: 2024-06-05 08:05"}),"\n",(0,r.jsxs)(o.p,{children:["Tags: ",(0,r.jsx)(o.code,{children:"#aws"})," ",(0,r.jsx)(o.code,{children:"#cloudfront"})," ",(0,r.jsx)(o.code,{children:"#cdn"})]}),"\n",(0,r.jsx)(o.h2,{id:"o-que-\xe9",children:"O que \xe9?"}),"\n",(0,r.jsx)(o.p,{children:"AWS CloudFront \xe9 o servi\xe7o distribu\xeddo de entrega de conte\xfado, a grosso modo podemos dizer que \xe9 um servi\xe7o de cache de conte\xfado est\xe1tico. \xc9 consistido por um alto n\xfamero de servidores de borda, atuando nos POPs (Points of Presence), para habilitar uma entrega de conte\xfado mais r\xe1pida e mais eficiente."}),"\n",(0,r.jsxs)(o.p,{children:[(0,r.jsx)(o.img,{alt:"800",src:s(6735).A+"",title:"wikilink",width:"713",height:"328"}),"\r\nPara fazer esta entrega mais r\xe1pida, por padr\xe3o, este servi\xe7o disponibiliza o conte\xfado em mais de ",(0,r.jsx)(o.strong,{children:"225 locais de borda"})," e mais de ",(0,r.jsx)(o.strong,{children:"13 caches regionais intermedi\xe1rios"}),", distribu\xeddos em mais de ",(0,r.jsx)(o.strong,{children:"47 pa\xedses"}),". Al\xe9m disto, a sincroniza\xe7\xe3o entre todos os caches \xe9 autom\xe1tica, n\xe3o sendo necess\xe1ria nenhuma intera\xe7\xe3o do usu\xe1rio para isto."]}),"\n",(0,r.jsx)(o.h2,{id:"componentes-b\xe1sicos",children:"Componentes b\xe1sicos"}),"\n",(0,r.jsx)(o.p,{children:"Este servi\xe7o possui componentes b\xe1sicos, a saber:"}),"\n",(0,r.jsxs)(o.ul,{children:["\n",(0,r.jsxs)(o.li,{children:[(0,r.jsx)(o.strong,{children:"Origin"})," - podemos definir a origin como o local onde residem as informa\xe7\xf5es que ser\xe3o distribu\xeddas globalmente. Estas fontes podem ser quaisquer servi\xe7os que operem com protocolo HTTP, como por exemplo S3, HTTP server, container NodeJS, etc"]}),"\n",(0,r.jsxs)(o.li,{children:[(0,r.jsx)(o.strong,{children:"Distribution"})," - \xc9 a inst\xe2ncia do Cloudfront, onde definimos todas as configura\xe7\xf5es, comportamentos, grupos de origins."]}),"\n",(0,r.jsxs)(o.li,{children:[(0,r.jsx)(o.strong,{children:"Lambda@Edge"})," S\xe3o fun\xe7\xf5es Lambda executadas diretamente no Cloudfront para podermos personalizar como trataremos o cache."]}),"\n",(0,r.jsxs)(o.li,{children:[(0,r.jsx)(o.strong,{children:"Cloudfront Functions"})," - S\xe3o fun\xe7\xf5es nativas do CloufFront para estender o comportamento das requisi\xe7\xf5es."]}),"\n"]}),"\n",(0,r.jsx)(o.h2,{id:"principais-benef\xedcios",children:"Principais benef\xedcios"}),"\n",(0,r.jsx)(o.p,{children:"Dentre os principais benef\xedcios podemos citar 2: r\xe1pido tempo de resposta e custo efetivo. Outros benef\xedcios importantes ser\xe3o discutidos a seguir."}),"\n",(0,r.jsx)(o.h3,{id:"tempo-de-resposta-r\xe1pido",children:"Tempo de resposta r\xe1pido"}),"\n",(0,r.jsx)(o.p,{children:"Para acelerar o tempo de resposta, o CloudFront utiliza v\xe1rias t\xe9cnicas de acelera\xe7\xe3o de entrega de conte\xfado a n\xedvel de protocolo TCP, valendo destacar as seguintes:"}),"\n",(0,r.jsxs)(o.table,{children:[(0,r.jsx)(o.thead,{children:(0,r.jsxs)(o.tr,{children:[(0,r.jsx)(o.th,{children:"T\xe9cnica"}),(0,r.jsx)(o.th,{children:"Descri\xe7\xe3o"}),(0,r.jsx)(o.th,{children:"Minhas considera\xe7\xf5es"})]})}),(0,r.jsxs)(o.tbody,{children:[(0,r.jsxs)(o.tr,{children:[(0,r.jsx)(o.td,{children:(0,r.jsx)(o.strong,{children:"TCP fast-open (TFO)"})}),(0,r.jsx)(o.td,{children:"Esta t\xe9cnica permite que dados enviados juntamente com os sinais SYN e SYN-ACK, economizando o RTT (Round Trip Time)."}),(0,r.jsx)(o.td,{children:"Por haver menor RTT em consequ\xeancia de menos requisi\xe7\xf5es, h\xe1 melhora na lat\xeancia"})]}),(0,r.jsxs)(o.tr,{children:[(0,r.jsx)(o.td,{children:(0,r.jsx)(o.strong,{children:"Request collapsing"})}),(0,r.jsx)(o.td,{children:"Por padr\xe3o um cache miss tem como consequ\xeancia uma requisi\xe7\xe3o no origin, assim, se houver muitos cache miss concorrentes, o origin ficar\xe1 sobrecarregado, causando lat\xeancia. O que esta t\xe9cnica faz \xe9 condensar todas as requisi\xe7\xf5es cache-miss em solicita\xe7\xe3o \xfanica ao origin."}),(0,r.jsx)(o.td,{children:'Com esta t\xe9cnica, o origin n\xe3o sofrer\xe1 sobrecarga, todas as requisi\xe7\xf5es "g\xeameas" ser\xe3o tratadas como uma s\xf3 e respondidas corretamente aos solicitantes, aumentando a efici\xeancia dos servi\xe7os'})]}),(0,r.jsxs)(o.tr,{children:[(0,r.jsx)(o.td,{children:(0,r.jsx)(o.strong,{children:"Keep alive"})}),(0,r.jsx)(o.td,{children:"Esta t\xe9cnica consiste em aproveitar a mesma conex\xe3o para todas as requisi\xe7\xf5es subsequentes, evitando repeti\xe7\xe3o de handshakes uma vez que j\xe1 foi executado em requisi\xe7\xf5es anteriores."}),(0,r.jsx)(o.td,{children:"Por aproveitar a conex\xe3o de requisi\xe7\xf5es anteriores, h\xe1 uma economia de tempo, pois o processo de handshake consome um pouco do tempo das requisi\xe7\xf5es, principalmente se utilizarem TLS."})]})]})]}),"\n",(0,r.jsx)(o.h3,{id:"seguran\xe7a",children:"Seguran\xe7a"}),"\n",(0,r.jsxs)(o.p,{children:["No aspecto de seguran\xe7a podemos destacar que, nativamente, o servi\xe7o suporta o protocolo TLS (v1.3*), al\xe9m de ser poss\xedvel permitir ou bloquear acessos de determinados pa\xedses.\r\nPara aumentar a seguran\xe7a, \xe9 poss\xedvel integrar o CloudFront ao AWS WAF, de forma que \xe9 poss\xedvel proteger o servi\xe7o e seus usu\xe1rios dos principais tipos de ataque, como os listados na ",(0,r.jsx)(o.a,{href:"https://owasp.org/Top10/",children:"TOP 10 OWASP:2021"})]}),"\n",(0,r.jsx)(o.p,{children:"Outro aspecto importante \xe9 que com o CloudFront, podemos deixar os recursos(origins) privados, sendo que o acesso ao p\xfablico seja realizado atrav\xe9s deste servi\xe7o, podendo acrescentar:"}),"\n",(0,r.jsxs)(o.ul,{children:["\n",(0,r.jsx)(o.li,{children:"Autentica\xe7\xe3o, gerenciada por fun\xe7\xf5es Lambda@Edge"}),"\n",(0,r.jsx)(o.li,{children:"URLs tempor\xe1rias assinadas, por meio par de chaves assim\xe9tricas"}),"\n"]}),"\n",(0,r.jsx)(o.p,{children:"Ainda \xe9 poss\xedvel, nativamente, restringir ou limitar o acesso por geolocaliza\xe7\xe3o, por\xe9m \xe9 importante ressaltar que a acur\xe1cia \xe9 de 99,8%, ou seja, n\xe3o h\xe1 garantia integral de restri\xe7\xe3o ou limita\xe7\xe3o."}),"\n",(0,r.jsx)(o.h4,{id:"restri\xe7\xe3o-de-acesso-ao-origin",children:"Restri\xe7\xe3o de acesso ao origin"}),"\n",(0,r.jsx)(o.p,{children:"O CloudFront consegue acessar servi\xe7os nativos da AWS de 3 formas:"}),"\n",(0,r.jsxs)(o.ul,{children:["\n",(0,r.jsxs)(o.li,{children:["Recursos com acesso ",(0,r.jsx)(o.strong,{children:"P\xfablico"})]}),"\n",(0,r.jsxs)(o.li,{children:["Acesso controlado por ",(0,r.jsx)(o.strong,{children:"Origin Access Identity"})," (OAI), que \xe9 a pol\xedtica do tipo identity based, aplicada a usu\xe1rios, grupos e roles. Esse modelo de acesso \xe9 considerado legado e \xe9 recomendado usar o OAC"]}),"\n",(0,r.jsxs)(o.li,{children:["Acesso controlado por ",(0,r.jsx)(o.strong,{children:"Origin Access Control"})," (OAC), que \xe9 a pol\xedtica do tipo ",(0,r.jsx)(o.em,{children:"resource based"}),", ou seja, aplicada diretamente no recurso que servir\xe1 como origin"]}),"\n"]}),"\n",(0,r.jsx)(o.p,{children:"Devido ao OAC n\xe3o h\xe1 necessidade de manter o acesso p\xfablico aos recursos, melhorando o aspecto de seguran\xe7a do conte\xfado que desejamos servir."}),"\n",(0,r.jsx)(o.h3,{id:"personaliza\xe7\xe3o-de-comportamento",children:"Personaliza\xe7\xe3o de comportamento"}),"\n",(0,r.jsxs)(o.p,{children:["Um funcionalidade importante deste servi\xe7o \xe9 que \xe9 poss\xedvel personalizar o comportamento da Distribution e como lidar com cada entrada do cache. De forma que cada requisi\xe7\xe3o recebe um ",(0,r.jsx)(o.code,{children:"cache key"}),", que determina se o conte\xfado ser\xe1 trazido diretamente o cache ou se o CloudFront deve requisit\xe1-lo da origin."]}),"\n",(0,r.jsxs)(o.p,{children:["O ",(0,r.jsx)(o.code,{children:"cache key"})," \xe9 controlada por uma ",(0,r.jsx)(o.strong,{children:"cache policy"})," que pode ser dos seguintes tipos:"]}),"\n",(0,r.jsxs)(o.ul,{children:["\n",(0,r.jsxs)(o.li,{children:[(0,r.jsx)(o.strong,{children:"AWS Managed"})," - consistida pelo ",(0,r.jsx)(o.em,{children:"domain name"})," da distribution e o request path"]}),"\n",(0,r.jsxs)(o.li,{children:[(0,r.jsx)(o.strong,{children:"Custom"})," - Podemos definir quais partes da requisi\xe7\xe3o far\xe3o parte do ",(0,r.jsx)(o.code,{children:"cache-key"}),", por exemplo, headers espec\xedficos, query strings ou cookies"]}),"\n"]}),"\n",(0,r.jsxs)(o.p,{children:["\xc9 importante ressaltar que um ",(0,r.jsx)(o.code,{children:"cache hit"})," ocorre ocorre quando uma ",(0,r.jsx)(o.em,{children:"viewer request"})," gera o mesmo cache-key das requisi\xe7\xf5es anteriores, e o objeto referente a essa chave est\xe1 no cache do local de borda, considerando que seja v\xe1lido."]}),"\n",(0,r.jsxs)(o.p,{children:["Al\xe9m disto, podemos utilizar os headers ",(0,r.jsx)(o.code,{children:"Cache-Control"})," e ",(0,r.jsx)(o.code,{children:"Expires"})," para determinar quando o CloudFront ir\xe1 trazer o conte\xfado diretamente o cache ou se ir\xe1 buscar diretamente no origin (forward request)."]}),"\n",(0,r.jsx)(o.h4,{id:"eventos-que-ativam-fun\xe7\xf5es-lambdaedge",children:"Eventos que ativam fun\xe7\xf5es Lambda@Edge"}),"\n",(0,r.jsxs)(o.p,{children:["As ",(0,r.jsx)(o.strong,{children:"Lambda@Edge"})," s\xe3o fun\xe7\xf5es indicadas para opera\xe7\xf5es mais complexas, sendo ideais para cen\xe1rios que precisemos interagir com outros servi\xe7os alheios ao CloudFront para servir conte\xfado, como por exemplo interagir com o DynamoDB."]}),"\n",(0,r.jsx)(o.p,{children:"\xc9 poss\xedvel realizar altera\xe7\xe3o de comportamento de 4 formas, por meio de gatilhos (triggers do CloudFront) que ativam fun\xe7\xf5es, sendo:"}),"\n",(0,r.jsxs)(o.table,{children:[(0,r.jsx)(o.thead,{children:(0,r.jsxs)(o.tr,{children:[(0,r.jsx)(o.th,{children:"Evento"}),(0,r.jsx)(o.th,{children:"Quando ocorre"}),(0,r.jsx)(o.th,{children:"N\xe3o executa ..."})]})}),(0,r.jsxs)(o.tbody,{children:[(0,r.jsxs)(o.tr,{children:[(0,r.jsx)(o.td,{children:"Viewer Request"}),(0,r.jsx)(o.td,{children:"Quanto o CF recebe a requisi\xe7\xe3o, antes de checar se est\xe1 no cache"}),(0,r.jsx)(o.td,{children:"-"})]}),(0,r.jsxs)(o.tr,{children:[(0,r.jsx)(o.td,{children:"Origin Request"}),(0,r.jsx)(o.td,{children:"Apenas quando o CF encaminha a requisi\xe7\xe3o para o origin,"}),(0,r.jsx)(o.td,{children:"- Quando o objeto est\xe1 no cache"})]}),(0,r.jsxs)(o.tr,{children:[(0,r.jsx)(o.td,{children:"Origin Response"}),(0,r.jsx)(o.td,{children:"Depois que o CF recebe a resposta do origin, antes de colocar o objeto no cache. \xc9 executada mesmo se houver erro no origin"}),(0,r.jsxs)(o.td,{children:["- Quando o objeto o arquivo est\xe1 no cache e n\xe3o est\xe1 expirado",(0,r.jsx)("p",{children:"- Quando a response \xe9 gerada por uma Function que foi ativada por um Origin Request"})]})]}),(0,r.jsxs)(o.tr,{children:[(0,r.jsx)(o.td,{children:"Viewer Response"}),(0,r.jsx)(o.td,{children:"Executada antes que o arquivo seja enviado ao usu\xe1rio, mesmo que o objeto j\xe1 esteja no cache"}),(0,r.jsxs)(o.td,{children:["- Origin retorna c\xf3digo 400+",(0,r.jsx)("p",{children:"- Quando p\xe1gina de erro \xe9 retornada"}),(0,r.jsx)("p",{children:"- Quando o response \xe9 gerado por uma function ativada na Viewer Request"}),(0,r.jsx)("p",{children:"- Quando o CF redireciona de HTTP para HTTPS (Viewer policy = Redirect HTTP to HTTPS)"})]})]})]})]}),"\n",(0,r.jsx)(o.p,{children:"Vale ressaltar que \xe9 poss\xedvel utilizar paralelamente fun\xe7\xf5es para cada evento, observando as restri\xe7\xf5es de ativa\xe7\xe3o, conforme quadro acima."}),"\n",(0,r.jsx)(o.h4,{id:"eventos-que-ativam-fun\xe7\xf5es-cloudfront",children:"Eventos que ativam fun\xe7\xf5es CloudFront"}),"\n",(0,r.jsxs)(o.p,{children:["As ",(0,r.jsx)(o.strong,{children:"CloudFront Functions"})," s\xe3o fun\xe7\xf5es para processamentos r\xe1pidos, que levem menos de 1ms para executar. Os usos mais indicados s\xe3o:"]}),"\n",(0,r.jsxs)(o.ul,{children:["\n",(0,r.jsx)(o.li,{children:"Normaliza\xe7\xe3o de cache-key"}),"\n",(0,r.jsx)(o.li,{children:"Roteamento: redirect e rewrite"}),"\n",(0,r.jsx)(o.li,{children:"Autoriza\xe7\xe3o, como valida\xe7\xe3o e/ou inspe\xe7\xe3o do baseado no conte\xfado do header Authorization"}),"\n"]}),"\n",(0,r.jsx)(o.h4,{id:"origin-shield",children:"Origin Shield"}),"\n",(0,r.jsxs)(o.p,{children:["O CloudFront possui uma funcionalidade chamada de Origin Shield, que consiste em proteger o origin contra m\xfaltiplas requisi\xe7\xf5es quando ocorrerem ",(0,r.jsx)(o.em,{children:"cache miss"}),". De forma que age como um concentrador de requisi\xe7\xf5es provenientes dos locais de borda, realizando somente uma \xfanica requisi\xe7\xe3o ao origin e entregando o conte\xfado desejado. Em consequ\xeancia disso, os ",(0,r.jsx)(o.em,{children:"cache hit ratios"})," s\xe3o melhorados."]}),"\n",(0,r.jsx)(o.p,{children:"Outro detalhe importante \xe9 que as Cloudfront Functions lidam somente com 2 tipos de eventos: Viewer Request e Viewer Response."}),"\n",(0,r.jsx)(o.h4,{id:"failover",children:"Failover"}),"\n",(0,r.jsx)(o.p,{children:"\xc9 poss\xedvel definir um grupo secund\xe1rio de origins para casos de falhas do grupo prim\xe1rio de origins. Assim, se o grupo prim\xe1rio responder com um status code de erro, o CloudFront ir\xe1 solicitar os objetos diretamente ao grupo secund\xe1rio, garantindo alta disponibilidade."}),"\n",(0,r.jsx)(o.h3,{id:"custo-efetivo",children:"Custo efetivo"}),"\n",(0,r.jsx)(o.p,{children:"O custo benef\xedcio desse servi\xe7o \xe9 um aspecto importante a ser considerado, ainda mais se levamos em conta que o tr\xe1fego entre o CloudFront e outros servi\xe7os nativos da AWS \xe9 cobrado."}),"\n",(0,r.jsxs)(o.p,{children:["Al\xe9m disto, podemos otimizar o custo ao utilizar a configura\xe7\xe3o ",(0,r.jsx)(o.strong,{children:"Price Class"})," que nos permite configurar em quais locais de borda teremos o conte\xfado distribu\xeddo, sobrescrevendo o comportamento padr\xe3o que \xe9 de distribuir em todos os pontos de presen\xe7a. Com o uso desta configura\xe7\xe3o o conte\xfado continuar\xe1 sendo acess\xedvel globalmente, por\xe9m o tr\xe1fego ser\xe1 otimizado somente nos locais pertencentes \xe0quele Price Class. \xc9 importante ressaltar aqui que os Edge Locations s\xe3o separados em classes 3 classes (at\xe9 a presente data), o que torna esta caracter\xedstica um pouco inflex\xedvel."]}),"\n",(0,r.jsx)(o.h4,{id:"cobran\xe7a",children:"Cobran\xe7a"}),"\n",(0,r.jsx)(o.p,{children:"A cobran\xe7a \xe9 feita, basicamente, em 3 aspectos:"}),"\n",(0,r.jsxs)(o.ul,{children:["\n",(0,r.jsx)(o.li,{children:"Por transfer\xeancia de dados, ou seja, a quantidade de dados que \xe9 enviada aos usu\xe1rios finais, havendo diferencia\xe7\xe3o de custo por HTTP ou HTTPS"}),"\n",(0,r.jsx)(o.li,{children:"Por requisi\xe7\xe3o, em que \xe9 cobrado o n\xfamero de requisi\xe7\xf5es, diferenciadas pelo tipo do m\xe9todo (GET, POST, HEAD, etc...)"}),"\n",(0,r.jsxs)(o.li,{children:["Por invoca\xe7\xe3o de ",(0,r.jsx)(o.em,{children:"Edge Functions"}),", sendo que o Lambda@Edge \xe9 cobrada por cada 1ms de processamento"]}),"\n",(0,r.jsx)(o.li,{children:"Taxas adicionais s\xe3o cobradas por uso de SSL/TLS"}),"\n",(0,r.jsx)(o.li,{children:"Taxas adicionais s\xe3o cobradas por invoca\xe7\xe3o de rotina de invalida\xe7\xe3o de cache"}),"\n"]}),"\n",(0,r.jsx)(o.h2,{id:"monitoramento",children:"Monitoramento"}),"\n",(0,r.jsx)(o.p,{children:"O CloudFront \xe9 integrado nativamente ao CloudWatch, e possui as seguintes m\xe9tricas capturadas:"}),"\n",(0,r.jsxs)(o.ul,{children:["\n",(0,r.jsx)(o.li,{children:"Estat\xedticas gerais de cache - hits, misses, status code, methods"}),"\n",(0,r.jsx)(o.li,{children:"Objetos populares - mais acessados e os hit ratios"}),"\n",(0,r.jsx)(o.li,{children:"Top Referrers - top 25 fontes de requisi\xe7\xf5es"}),"\n",(0,r.jsx)(o.li,{children:"Uso geral - N\xfamero de requisi\xe7\xf5es e transfer\xeancia por protocolo"}),"\n",(0,r.jsx)(o.li,{children:"Visualizadores - informa\xe7\xe3o sobre dispositivos, browsers, sistemas operacionais e locations"}),"\n"]}),"\n",(0,r.jsx)(o.h2,{id:"outros-pontos-a-destacar",children:"Outros pontos a destacar"}),"\n",(0,r.jsx)(o.p,{children:"Al\xe9m dos pontos supracitados, podemos destacar:"}),"\n",(0,r.jsxs)(o.ul,{children:["\n",(0,r.jsx)(o.li,{children:"Com o Lambda@Edge, \xe9 poss\xedvel realizar um processo de autentica\xe7\xe3o personalizada, por exemplo, baseada em DB"}),"\n",(0,r.jsx)(o.li,{children:"\xc9 poss\xedvel rotear tr\xe1fego para diferentes vers\xf5es e/ou origins de um determinado conte\xfado, como por exemplo:"}),"\n",(0,r.jsx)(o.li,{children:"Via custom cookie ou header"}),"\n",(0,r.jsx)(o.li,{children:"Por geolocaliza\xe7\xe3o"}),"\n",(0,r.jsx)(o.li,{children:"Por idioma"}),"\n",(0,r.jsx)(o.li,{children:"\xc9 poss\xedvel limitar os downloads realizados por um cliente, como por exemplo:"}),"\n",(0,r.jsx)(o.li,{children:"Lambda@Edge Integrado ao DynamoDB para armazenar quantos dados o cliente baixou"}),"\n",(0,r.jsx)(o.li,{children:"Uso do Header Content-length trazido por uma requisi\xe7\xe3o HEAD do Lambda@Edge ao origin para realizar a contabiliza\xe7\xe3o de acesso do usu\xe1rio"}),"\n",(0,r.jsx)(o.li,{children:"Com o uso do Edge Functions, \xe9 preciso observar a quantidade de requisi\xe7\xf5es, pois h\xe1 custos de uso deste servi\xe7o"}),"\n",(0,r.jsx)(o.li,{children:"\xc9 poss\xedvel monitorar cada distribution no Cloudwatch"}),"\n",(0,r.jsx)(o.li,{children:"Para acelerar o desenvolvimento, \xe9 poss\xedvel testar as fun\xe7\xf5es direto na console da AWS"}),"\n",(0,r.jsx)(o.li,{children:"O logs da Edge Functions ser\xe3o gravados na regi\xe3o onde foram invocadas, mesmo que tenham sido publicadas em outra regi\xe3o"}),"\n",(0,r.jsx)(o.li,{children:"\xc9 poss\xedvel integrar o CloudFront com o Route53, por meio de um CNAME"}),"\n",(0,r.jsx)(o.li,{children:"\xc9 poss\xedvel integrar o CloudFront ao AWS Certificate Manager"}),"\n",(0,r.jsx)(o.li,{children:"\xc9 poss\xedvel ter m\xfaltiplas regras de cache operando em paralelo, de forma que podemos, para alguns arquivos, retornar sempre a vers\xe3o mais recentes, enquanto outros obedecer\xe3o as regras de TTL"}),"\n"]}),"\n",(0,r.jsx)(o.h2,{id:"references",children:"References"}),"\n",(0,r.jsxs)(o.ol,{children:["\n",(0,r.jsx)(o.li,{children:"AWS Cloudfront - My literature notes"}),"\n",(0,r.jsx)(o.li,{children:"AWS Fundamentals Cloudfront"}),"\n",(0,r.jsxs)(o.li,{children:["TCP fast-open: ",(0,r.jsx)(o.a,{href:"https://www.rfc-editor.org/rfc/rfc7413",children:"https://www.rfc-editor.org/rfc/rfc7413"})]}),"\n",(0,r.jsxs)(o.li,{children:["Request collapsing: ",(0,r.jsx)(o.a,{href:"https://www.peakhour.io/blog/request-collapsing/",children:"https://www.peakhour.io/blog/request-collapsing/"})]}),"\n",(0,r.jsxs)(o.li,{children:["Keep alive connections: ",(0,r.jsx)(o.a,{href:"https://www.imperva.com/learn/performance/http-keep-alive/",children:"https://www.imperva.com/learn/performance/http-keep-alive/"})]}),"\n",(0,r.jsxs)(o.li,{children:["Price class: ",(0,r.jsx)(o.a,{href:"https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/PriceClass.html",children:"https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/PriceClass.html"})]}),"\n",(0,r.jsxs)(o.li,{children:["Price class values: ",(0,r.jsx)(o.a,{href:"https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/distribution-web-values-specify.html#DownloadDistValuesPriceClass",children:"https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/distribution-web-values-specify.html#DownloadDistValuesPriceClass"})]}),"\n",(0,r.jsxs)(o.li,{children:["CloudFront Trigger Events: ",(0,r.jsx)(o.a,{href:"https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/lambda-cloudfront-trigger-events.html",children:"https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/lambda-cloudfront-trigger-events.html"})]}),"\n",(0,r.jsxs)(o.li,{children:["Caching duration and mininum TTL: ",(0,r.jsx)(o.a,{href:"https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/RequestAndResponseBehaviorS3Origin.html#RequestS3Caching",children:"https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/RequestAndResponseBehaviorS3Origin.html#RequestS3Caching"})]}),"\n",(0,r.jsxs)(o.li,{children:["Cache-control header: ",(0,r.jsx)(o.a,{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Cache-Control",children:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Cache-Control"})]}),"\n",(0,r.jsxs)(o.li,{children:["Escolhendo as edge functions: ",(0,r.jsx)(o.a,{href:"https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/edge-functions-choosing.html",children:"https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/edge-functions-choosing.html"})]}),"\n",(0,r.jsxs)(o.li,{children:["Example code of CF Signed URL: ",(0,r.jsx)(o.a,{href:"https://github.com/rafaelszp/studies-cloudfront-signed-url",children:"https://github.com/rafaelszp/studies-cloudfront-signed-url"})]}),"\n"]})]})}function u(e={}){const{wrapper:o}={...(0,a.R)(),...e.components};return o?(0,r.jsx)(o,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},6735:(e,o,s)=>{s.d(o,{A:()=>r});const r=s.p+"assets/images/CloudFront.excalidraw-2dc3c340945805b02588c0fbb84743df.svg"},8453:(e,o,s)=>{s.d(o,{R:()=>n,x:()=>d});var r=s(6540);const a={},i=r.createContext(a);function n(e){const o=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(o):{...o,...e}}),[o,e])}function d(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:n(e.components),r.createElement(i.Provider,{value:o},e.children)}}}]);