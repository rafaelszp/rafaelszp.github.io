"use strict";(self.webpackChunkrafaelszp_github_io=self.webpackChunkrafaelszp_github_io||[]).push([[4398],{7936:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>o,contentTitle:()=>r,default:()=>h,frontMatter:()=>a,metadata:()=>l,toc:()=>c});var n=s(4848),i=s(8453);const a={title:"Bash strict mode",date:"2022-01-07",categories:["linux"]},r=void 0,l={permalink:"/blog/2022/01/07/2022/01/548",editUrl:"https://github.com/rafaelszp/rafaelszp.github.io/tree/master/blog/blog/2022/01/2022-01-07-548/index.md",source:"@site/blog/2022/01/2022-01-07-548/index.md",title:"Bash strict mode",description:"All contents are from this address//redsymbol.net/articles/unofficial-bash-strict-mode/",date:"2022-01-07T00:00:00.000Z",tags:[],readingTime:1.465,hasTruncateMarker:!1,authors:[],frontMatter:{title:"Bash strict mode",date:"2022-01-07",categories:["linux"]},unlisted:!1,prevItem:{title:"Generatin wildcard cert win SAN's with letsencrypt",permalink:"/blog/2022/02/02/2022/02/generatin-wildcard-cert-win-sans-with-letsencrypt"},nextItem:{title:"3 useful commands to backup and restore an  MySQL database",permalink:"/blog/2021/11/29/2021/11/3-useful-commands-to-backup-and-restore-an-mysql-database"}},o={authorsImageUrls:[]},c=[{value:"Explanation",id:"explanation",level:3},{value:"set -e",id:"set--e",level:4},{value:"set -u",id:"set--u",level:4},{value:"set -o pipefail",id:"set--o-pipefail",level:4},{value:"The IFS variable",id:"the-ifs-variable",level:4}];function d(e){const t={a:"a",br:"br",code:"code",em:"em",h3:"h3",h4:"h4",img:"img",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(t.p,{children:["All contents are from this address: ",(0,n.jsx)(t.a,{href:"http://redsymbol.net/articles/unofficial-bash-strict-mode/",children:"http://redsymbol.net/articles/unofficial-bash-strict-mode/"}),(0,n.jsx)(t.br,{}),"\n","Consider reading the original article instead."]}),"\n",(0,n.jsx)(t.p,{children:"Headline bash script:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:"#!/bin/bash\nset -euo pipefail\nIFS=$'\\n\\t'\n"})}),"\n",(0,n.jsxs)(t.p,{children:["Reference: ",(0,n.jsx)(t.a,{href:"http://redsymbol.net/articles/unofficial-bash-strict-mode/",children:"http://redsymbol.net/articles/unofficial-bash-strict-mode/"})]}),"\n",(0,n.jsx)(t.h3,{id:"explanation",children:"Explanation"}),"\n",(0,n.jsx)(t.h4,{id:"set--e",children:"set -e"}),"\n",(0,n.jsxs)(t.p,{children:["The ",(0,n.jsx)(t.em,{children:"set -e"})," option instructs bash to immediately exit if any command [1] has a non-zero exit status. You wouldn't want to set this for your command-line shell, but in a script it's massively helpful. In all widely used general-purpose programming languages, an unhandled runtime error - whether that's a thrown exception in Java, or a segmentation fault in C, or a syntax error in Python - immediately halts execution of the program; subsequent lines are not executed."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:"set -e\n"})}),"\n",(0,n.jsx)(t.h4,{id:"set--u",children:"set -u"}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.em,{children:"set -u"})," affects variables. When set, a reference to any variable you haven't previously defined - with the exceptions of $* and $@ - is an error, and causes the program to immediately exit. Languages like Python, C, Java and more all behave the same way, for all sorts of good reasons. One is so typos don't create new variables without you realizing it."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:"set -u\n"})}),"\n",(0,n.jsx)(t.h4,{id:"set--o-pipefail",children:"set -o pipefail"}),"\n",(0,n.jsx)(t.p,{children:"This setting prevents errors in a pipeline from being masked. If any command in a pipeline fails, that return code will be used as the return code of the whole pipeline. By default, the pipeline's return code is that of the last command - even if it succeeds."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:"set -o pipefail\n"})}),"\n",(0,n.jsx)(t.h4,{id:"the-ifs-variable",children:"The IFS variable"}),"\n",(0,n.jsx)(t.p,{children:"The IFS variable - which stands for Internal Field Separator - controls what Bash calls word splitting. When set to a string, each character in the string is considered by Bash to separate words. This governs how bash will iterate through a sequence."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:"IFS=$'\\n\\t'\n"})}),"\n",(0,n.jsx)(t.p,{children:"Examples:"}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.a,{href:"https://rafaelszp.files.wordpress.com/2022/01/2022-01-07_14-25.png",children:(0,n.jsx)(t.img,{src:"https://rafaelszp.files.wordpress.com/2022/01/2022-01-07_14-25.png?w=757",alt:""})})}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.a,{href:"https://rafaelszp.files.wordpress.com/2022/01/2022-01-07_14-27.png",children:(0,n.jsx)(t.img,{src:"https://rafaelszp.files.wordpress.com/2022/01/2022-01-07_14-27.png?w=839",alt:""})})})]})}function h(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}},8453:(e,t,s)=>{s.d(t,{R:()=>r,x:()=>l});var n=s(6540);const i={},a=n.createContext(i);function r(e){const t=n.useContext(a);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),n.createElement(a.Provider,{value:t},e.children)}}}]);