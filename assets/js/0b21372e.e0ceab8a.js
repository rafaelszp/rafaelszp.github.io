"use strict";(self.webpackChunkrafaelszp_github_io=self.webpackChunkrafaelszp_github_io||[]).push([[1343],{9687:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>a,contentTitle:()=>o,default:()=>l,frontMatter:()=>s,metadata:()=>c,toc:()=>d});var t=n(4848),i=n(8453);const s={title:"Pushing custom images to your private docker registry",date:"2017-05-03",categories:["docker"]},o=void 0,c={permalink:"/blog/2017/05/03/2017/05/pushing-custom-images-to-your-private-docker-registry",editUrl:"https://github.com/rafaelszp/rafaelszp.github.io/tree/master/blog/blog/2017/05/2017-05-03-pushing-custom-images-to-your-private-docker-registry/index.md",source:"@site/blog/2017/05/2017-05-03-pushing-custom-images-to-your-private-docker-registry/index.md",title:"Pushing custom images to your private docker registry",description:"Creating the registry",date:"2017-05-03T00:00:00.000Z",tags:[],readingTime:.48,hasTruncateMarker:!1,authors:[],frontMatter:{title:"Pushing custom images to your private docker registry",date:"2017-05-03",categories:["docker"]},unlisted:!1,prevItem:{title:"Extracting package from Android via adb",permalink:"/blog/2017/06/19/2017/06/extracting-package-from-android-via-adb"},nextItem:{title:"Logging into keycloak using auth URL",permalink:"/blog/2017/04/26/2017/04/logging-into-keycloak-using-auth-url"}},a={authorsImageUrls:[]},d=[];function g(e){const r={a:"a",code:"code",p:"p",pre:"pre",strong:"strong",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.p,{children:(0,t.jsx)(r.strong,{children:"Creating the registry"})}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:"docker-machine create registry\ndocker-machine ssh registry\ndocker run -d -p 5000:5000 --restart=always --name registry registry:2\n\n"})}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.strong,{children:'Enabling push to "insecure" docker registry'})}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:"sudo vim /etc/docker/daemon.json\n\n"})}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.strong,{children:"Restarting docker"})}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:"sudo systemctl restart docker.service\n\n"})}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.strong,{children:"Assuming you docker-machine IP is 192.168.99.100, insert this line:"})}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:'{ "insecure-registries":["192.168.99.100:5000"] }\n\n'})}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.strong,{children:"Building an image with tag"})}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:"docker build --tag my-image -f src/main/docker/Dockerfile .\n"})}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.strong,{children:"Tagging your custom image to point to your local registry:"})}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:" docker tag my-image 192.168.99.100:5000/my-image\n\n"})}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.strong,{children:"Pushing your custom image:"})}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:" docker push 192.168.99.100:5000/my-image\n\n"})}),"\n",(0,t.jsxs)(r.p,{children:["Reference:\xa0",(0,t.jsx)(r.a,{href:"https://docs.docker.com/registry/deploying/",children:"Deploying a registry server"})]})]})}function l(e={}){const{wrapper:r}={...(0,i.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(g,{...e})}):g(e)}},8453:(e,r,n)=>{n.d(r,{R:()=>o,x:()=>c});var t=n(6540);const i={},s=t.createContext(i);function o(e){const r=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function c(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),t.createElement(s.Provider,{value:r},e.children)}}}]);